<Window
    x:Class="BBIHardwareSupport.MDM.IntuneConfigManager.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:Microsoft.UI.Xaml.Controls"
    xmlns:local="using:BBIHardwareSupport.MDM.IntuneConfigManager"
    Title="BBI - MDM Workflow">

    <StackPanel Padding="30" Spacing="15" Background="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}">
        <!-- Header -->
        <TextBlock Text="MDM Intune Manager" FontSize="28" FontWeight="Bold" Foreground="DeepSkyBlue"/>

        <controls:Expander Header="Git Repository Manager" IsExpanded="True">
            <StackPanel Spacing="10">
                <TextBlock Text="Branch Name:" FontWeight="Bold"/>
                <TextBox Width="300" Text="{x:Bind ViewModel.BranchName, Mode=TwoWay}" PlaceholderText="feature/new-branch"/>
                <Button Content="Create Branch" Command="{x:Bind ViewModel.CreateBranchCommand}" Width="200" CornerRadius="10"/>

                <Button Content="Commit Changes" Command="{x:Bind ViewModel.CommitChangesCommand}" Width="200" CornerRadius="10"/>
                <Button Content="View Diff" Command="{x:Bind ViewModel.GetDiffCommand}" Width="200" CornerRadius="10"/>

                <TextBlock Text="Repository Path:" FontWeight="Bold"/>
                <TextBox Width="400" Text="{x:Bind ViewModel.RepositoryPath, Mode=TwoWay}"/>
                <Button Content="Set Repository" Command="{x:Bind ViewModel.SelectRepositoryCommand}" Width="200" CornerRadius="10"/>
            </StackPanel>
        </controls:Expander>

        <controls:Expander Header="Intune Artifact Manager" IsExpanded="True">
            <StackPanel Spacing="10">
                <TextBlock Text="Enter Group ID:" FontWeight="Bold"/>
                <TextBox Width="300" Text="{x:Bind ViewModel.GroupId, Mode=TwoWay}" PlaceholderText="Enter Group ID"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                    <Button Content="Get Device Configurations" Command="{x:Bind ViewModel.GetDeviceConfigurationsCommand}" Width="200" Margin="5" CornerRadius="10"/>
                    <Button Content="Get Apps" Command="{x:Bind ViewModel.GetAppsCommand}" Width="200" Margin="5" CornerRadius="10"/>
                </StackPanel>

                <Button Content="Get All Intune Policies (JSON)" Command="{x:Bind ViewModel.GetAllIntunePoliciesJsonCommand}" Width="300" CornerRadius="10" Background="DeepSkyBlue" Foreground="White"/>
            </StackPanel>
        </controls:Expander>

        <!-- Status Message -->
        <controls:InfoBar Title="Status" Message="{x:Bind ViewModel.StatusMessage, Mode=OneWay}" IsOpen="True"/>

        <!-- Artifacts List -->
        <TextBlock Text="Retrieved Artifacts:" FontWeight="Bold" Margin="10"/>
        <ListView ItemsSource="{x:Bind ViewModel.Artifacts}" Width="600" Height="200">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding}" FontSize="14"/>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </StackPanel>
</Window>
